const Nenge=new class{DB_NAME="RetroArch_WEB";DB_STORE_MAP={"data-libjs":null,"data-rooms":null,"data-info":null,"/userdata":"userdata","/home/web_user/retroarch/userdata":"retroarch"};Encoding="GBK";version=2;maxsize=104857600;part="-part-";lang={};DATE=new Date;JSpath=document.currentScript&&document.currentScript.src.split("/").slice(0,-1).join("/")+"/";isMobile="ontouchend"in document;$=(e,t)=>e instanceof Function?this.docload(e):(t||document).querySelector(e);$$=(e,t)=>(t||document).querySelectorAll(e);$ce=e=>document.createElement(e);Err(e){throw new Error(e)}constructor(){}async getItem(e,t,a,n={}){if(!t)return await this.getAllData(e,n);let s=this,r=s.unitl,i=s.maxsize,o=s.part,c=await r.DB_ItemGet(Object.assign({store:e,name:t},n)),l=t.split(o)[0];if(c){if(a&&c.version&&c.version!=a)c=void 0;else if(c.contents&&c.filesize&&c.filesize>i){let a=new Uint8Array(c.filesize);await Promise.all(Array(Math.ceil(c.filesize/i)).fill(l).map((async(l,p)=>{let u=l;if(p>0&&(u+=o+p),u==t)a.set(c.contents,p*i);else{let t=await r.DB_ItemGet(Object.assign(n,{store:e,name:u}));t?a.set(t.contents,p*i):s.Err("lost file")}}))),c.contents=a}c&&c.contents&&("unpack"==c.type?c.contents=await r.unFile(c.contents,n):"File"==c.type?c.contents=new File([c.contents],c.filename||l,{type:c.filetype||r.gettype(c.filename||l)}):"String"==c.type.split("/")[0]&&(c.contents=(new TextDecoder).decode(c.contents)))}return c}async setItem(e,t,a,n){let s=this,r=s.unitl,i=s.maxsize,o=s.part;if((a=await r.DB_ConvertData(a,i)).contents&&a.contents.byteLength>i){let s=a.contents.byteLength,c={};return Object.entries(a).forEach((e=>{"contents"!=e[0]&&(c[e[0]]=e[1])})),await Promise.all(Array(Math.ceil(s/i)).fill(t).map((async(t,l)=>{let p=t,u=l*i;return l>0&&(p+=o+l),await r.DB_ItemPut({store:e,data:Object.assign({contents:new Uint8Array(a.contents.subarray(u,s-u>=i?u+i:s))},c),name:p,dbName:n})})))}return await r.DB_ItemPut({store:e,data:a,name:t,dbName:n})}async removeItem(e,t,a){let{clear:n,dbName:s}=a||{},r=this,i=r.unitl;if(n){let n=await i.DB_ItemGet(Object.assign({store:e,name:t},a));if(n&&n.filesize)return await Promise.all(Array(Math.ceil(n.filesize/r.maxsize)).fill(t.split(part)[0]).map((async(t,a)=>{let n=t;return a>0&&(n+=r.part+a),await i.DB_ItemRemove({store:e,name:n})+"\n"})))}return await i.DB_ItemRemove({store:e,name:t,dbName:s})}async getAllData(e,t,a){return await this.unitl.DB_ItemAll(Object.assign({store:e,only:t},a))}async getContent(e,t,a,n){let s=await this.getItem(e,t,a,n);return s&&s.contents||s}async getAllKeys(e,t){return await this.unitl.DB_ItemKeys({store:e,dbName:t})}async getAllCursor(e,t,a,n){return await this.unitl.DB_ItemCursor(Object.assign({store:e,key:t,only:a},n))}async clearDB(e,t){let a=this.unitl;if(e)return"string"==typeof e&&(e=[e]),await a.DB_clear(e,t)}async deleteDB(e,t){let a=this.unitl;return"string"==typeof e&&(e=[e]),await a.DB_delete(e,t)}async FectchItem(e){e&&"string"!=typeof e||(e={url:e||"/"});let t,a,n=this,s=n.unitl,r=e.key||s.getname(e.url)||"index.php",i=e.version,o={},c=(t,a)=>s.unFile(t,Object.assign(e,{password:a})),l=async t=>t&&t.contents?("unpack"==t.type&&(t.contents=await c(t.contents,t.password)),e.success&&e.success(t.contents,o),t.contents):(e.success&&e.success(t,o),t);if(e.store&&!e.unset&&(t=await n.getItem(e.store,r,i,e),t&&!e.checksize))return l(t);a=await s.FetchStart(e),o=s.FetchHeader(a,e);let p=o.password;if(404==a.status)return e.error&&e.error(a.statusText),l(t);if(t&&t.filesize&&o.byteLength>0){if(t.filesize==o.byteLength)return l(t);t.contents&&delete t.contents}let u=await s.FetchStream(a,o,e),d=o.type;u.byteLength&&(u=new Uint8Array(u.buffer||u),d="Uint8Array");let m=u.byteLength||o.byteLength||u.length||0;if(e.store&&e.unpack&&e.key!=s.LibKey&&m>n.maxsize&&(d="unpack",await n.setItem(e.store,r,{contents:u,timestamp:new Date,filesize:m,version:i,type:d,password:p}),delete e.store),e.unpack&&u instanceof Uint8Array&&(u=await c(u,p||e.password),u.byteLength||(d="datalist")),e.store&&e.key==s.LibKey){let t;u instanceof Uint8Array?(u=new File([u],s.getname(e.url),{type:o.type}),r=s.LibKey+"-"+s.getname(e.url),d="File"):(await Promise.all(Object.entries(u).map((async a=>{let[r,i]=a,o=r.split("/").pop(),c=s.gettype(o),l=new File([i],o,{type:c});return n.Libjs[o]=l,await n.setItem(e.store,s.LibKey+"-"+o,{contents:l,timestamp:n.DATE,filesize:i.byteLength,version:n.version,type:"File"}),e.filename==o&&(t=l),!0}))),t&&(u=t),delete e.store)}return e.store&&await n.setItem(e.store,r,{contents:u,timestamp:new Date,filesize:m,version:i,type:d}),e.success&&e.success(u,o),u}addJS(e,t,a){let n=!1,s=document.createElement(a?"link":"script"),r=t=>{/^(blob:)?https?:\/\//.test(e)||/(\.js$|\.css$)/.test(e)||(n=!0,e=this.unitl.URL(e,a?"css":"js")),a?(s.type=this.unitl.gettype("css"),s.href=e,s.rel="stylesheet"):(s.type=this.unitl.gettype("js"),s.src=e),s.onload=a=>{t&&t(a),n&&window.URL.revokeObjectURL(e),e=null},this.$(a?"head":"body").appendChild(s)};if(!t)return new Promise(((e,t)=>r(e)));r(t)}customElement(e){let t=this,a=class extends HTMLElement{constructor(){super(),t.runaction("TAG-"+this.tagName,[this,"init"])}connectedCallback(){t.runaction("TAG-"+this.tagName,[this,"connect"])}attributeChangedCallback(e,a,n){t.runaction("TAG-"+this.tagName,[this,"attribute",e,a,n])}disconnectedCallback(){t.runaction("TAG-"+this.tagName,[this,"disconnect"])}};window.customElements.define(e,a)}ajax(e){return new Promise(((t,a)=>{e=e||{};const n=new XMLHttpRequest(e.paramsDictionary);n.responseType=e.type||"arraybuffer",e.error||(e.error=a),e.mime&&n.overrideMimeType(e.mime);let s=["abort","error","load","loadend","loadstart","progress","readystatechange","timeout"];s.forEach((t=>e[t]&&this.on(n,t,(a=>e[t](a,n))))),e.readystatechange||this.on(n,"readystatechange",(a=>{switch(n.readyState){case 0:break;case 1:break;case 2:break;case 3:break;case 4:if(500==n.status)throw n.dispatchEvent(new ErrorEvent("error",{message:n.response})),n.response;e.success&&e.success(n.response,n.status,n,a),t(n.response);break}})),n.upload&&e.upload&&s.forEach((t=>e.upload[t]&&this.on(n.upload,t,(a=>e.upload[t](a,n)))));let r,i,o=e.url.split("?"),c=o[0];o[1]&&(r=new URLSearchParams(o.slice(1).join(""))),e.get=e.get||{},e.get.inajax=1,e.get._t=(new Date).getTime(),e.get&&(r?Object.entries(e.get).forEach((e=>r.append(e[0],e[1]))):r=new URLSearchParams(e.get)),r&&(c+="?"+r.toString()),e.post&&(e.post instanceof Element?i=new FormData(e.post):e.post instanceof FormData?i=e.post:(i=new FormData,Object.entries(e.post).forEach((e=>i.append(e[0],e[1])))),i.append("inajax",1)),n.open(e.post?"POST":"GET",c),n.send(i)}))}runaction(e,t){if(this.action[e])return t?t instanceof Array?this.action[e].apply(this,t):this.action[e].call(this,t):this.action[e]()}async appendscript(e){let t=/^(\/|https?:\/\/|static\/js\/|data\/)/.test(e)?e:this.JSpath+e,a=await this.FectchItem({url:t,store:"data-libjs",key:"script-"+e.split("/").pop(),version:this.version});return await this.addJS(a)}unFile(e,t,a){return this.unitl.unFile(e,Object.assign({process:t},a))}unitl=new class{async FetchStream(e,t,a){let n=t.byteLength||0,s=a.downtext&&a.downtext||"进度:",r=0;return new Response(new ReadableStream({async start(t){const i=e.body.getReader();let o=async()=>{const{done:e,value:c}=await i.read();if(e)t.close();else{let e;r+=Number(c.length),n&&(e=s+Math.floor(r/n*100)+"%"),a.process&&a.process(e,n,r),t.enqueue(c),o()}};o()}}))[a.type||"arrayBuffer"]()}FetchHeader(e,t){let a={};return e.headers.forEach(((e,t)=>a[t]=e)),(a["content-type"]||this.gettype(t.url.split("/").pop()||"html")).split(";").forEach(((e,t)=>{if(e=e.trim().toLowerCase(),0==t)a["content-type"]=e;else if(-1!=e.search(/=/)){let t=e.split("=");a[t[0].trim()]=t[1].trim()}})),Object.assign(a,{byteLength:Number(a["content-length"])||0,password:a.password||a["content-password"],type:a.type||a["content-type"].split("/")[0]})}async FetchStart(e){let t,{url:a,get:n,post:s,postdata:r,form:i}=e||{},o={};return n&&(a+=(/\?/.test(a)?"&":"?")+new URLSearchParams(n).toString()),["headers","context","referrer","referrerPolicy","mode","credentials","redirect","integrity","cache"].forEach((t=>{null!=e[t]&&(o[t]=e[t])})),i||s?(t="string"==typeof i?new FormData(this.T.$(i)):i instanceof HTMLElement?new FormData(i):i instanceof FormData?i:new FormData,s&&Object.entries(s).forEach((e=>t.append(e[0],e[1])))):r&&(t=r),t&&(o.method="POST",o.body=t),await fetch(a,o).catch((e=>{throw e}))}async unRAR(e,t){let{process:a,password:n,packsrc:s}=t,r=new Worker(this.URL(await this.getLibjs(s||"rar.js")));return new Promise((s=>{let i={};r.onmessage=e=>{let n=e.data;1===n.t?(s(i),e.target.terminate()):2===n.t?i[n.file]=n.data:4===n.t&&n.total>0&&n.total>=n.current&&a&&a(t.packtext+" "+(n.name||"")+" "+Math.floor(Number(n.current)/Number(n.total)*100)+"%",n.total,n.current)},r.postMessage(file?e:{data:e,password:n})}))}async un7z(e,t){return t.packsrc="7z.js",this.unRAR(e,t)}async unZip(e,t={}){let{process:a,password:n,packtext:s}=t,r=this,i=r.T;await r.ZipInitJS();let o=new zip.ZipReader(e instanceof Blob?new zip.BlobReader(e):new zip.Uint8ArrayReader(e)),c=await o.getEntries({filenameEncoding:i.Encoding});if(c.length>0){let e={};return await Promise.all(c.map((async t=>{if(t.directory)return;let i={onprogress:(e,n)=>a&&a(s+t.filename+":"+Math.ceil(100*e/n)+"%")};return t.encrypted?e[t.filename]=await r.ZipData(t,i,n):e[t.filename]=await t.getData(new zip.Uint8ArrayWriter,i),!0}))),o.close(),delete r.ZipPassword,e}return e}ZipWait(){if(null!=this.ZipPassword)return new Promise((e=>{let t=setInterval((()=>{""!=this.ZipPassword&&(clearInterval(t),e(!0))}),this.speed)}))}async ZipData(e,t,a){let n=this;try{return await await e.getData(new zip.Uint8ArrayWriter,Object.assign(t,{password:n.ZipPassword||a}))}catch(s){return await n.ZipWait(),this.ZipPassword&&n.ZipPassword!=a||(this.ZipPassword=""),n.ZipPassword||(n.ZipPassword=window.prompt("need a read password",n.ZipPassword||"")),await n.ZipData(e,t,n.ZipPassword)}}async ZipCreate(e){return await this.ZipInitJS(),new zip.ZipWriter(new zip.Uint8ArrayWriter,{password:e})}async ZipInitJS(){let e=this,t=e.T;return window.zip||await t.addJS(await e.getLibjs(e.Libzip)),!0}async ZipAddFile(e,t,a,n,s){return a||(a=await this.ZipCreate(t)),e instanceof File?await a.add(e.name,new zip.BlobReader(e),n):await Promise.all(Array.from(e).map((async e=>await a.add(e.name,new zip.BlobReader(e),n)))),await a.close(s)}async unFile(e,t={}){if("string"==typeof t&&(t.unMode={unMode:t}),t.packtext=t.packtext||"解压:",t.unMode&&this[t.unMode])return await this[t.unMode](e,t);let a,n=null;if(e instanceof Blob){if(e.name){let t=e.name.split("?")[0].split(".").pop().toLowerCase();"zip"==t?n="unZip":"rar"==t?n="unRAR":"7z"==t&&(n="un7z")}else if(e.type){let t=e.type.split("/").pop();/zip/.test(t)?n="unZip":/rar/.test(t)?n="unRAR":/7z/.test(t)&&(n="un7z")}n||(e=new Uint8Array(await e.arrayBuffer()),a=this.checkBuffer(e))}else e instanceof Uint8Array?a=this.checkBuffer(e):(e.buffer||e instanceof Array)&&(e=new Uint8Array(e),a=this.checkBuffer(e));return a&&("zip"==a?n="unZip":"rar"==a?n="unRAR":"7z"==a&&(n="un7z")),n&&this[n]?await this[n](e,t):e}get random(){return Number(Math.random().toString().slice(2))}getname(e){return(e||"").split("/").pop().split("?")[0]}gettype(e){return e=this.getname(e).split(".").pop().toLowerCase(),this.mime_list||(this.mime_list={},Object.entries(this.mime_map).forEach((e=>e[1].forEach((t=>this.mime_list[t]=e[0]+(e[0].includes("/")?"":"/"+t)))))),this.mime_list[e]||"application/octet-stream"}istext(e){return this.gettype(e).includes("text")}mime_preg={"7z":/^377ABCAF271C/,rar:/^52617221/,zip:/^504B0304/,png:/^89504E470D0A1A0A/,gif:/^47494638/,jpg:/^FFD8FF/,webp:/^52494646/,pdf:/^255044462D312E/};mime_map={"text/javascript":["js"],"text/css":["css","style"],"text/html":["html","htm","php"],"text/plain":["txt"],"text/xml":["xml","vml","svg"],image:["jpg","jpeg","png","gif","webp"],application:["pdf"],"application/x-zip-compressed":["zip"],"application/x-rar-compressed":["rar"],"application/x-7z-compressed":["7z"]};checkBuffer(e,t){let a=Array.from(e.slice(0,8)).map((e=>e.toString(16).padStart(2,0).toLocaleUpperCase())).join("");for(let e in this.mime_preg)if(this.mime_preg[e].test(a))return e;return t||"unkonw"}URL(e,t){let a=this;if(e instanceof Uint8Array)t||(t=a.gettype(a.checkBuffer(e)));else if("string"==typeof e){if(/^(blob|http)/.test(e)||/^\/?[\w\-_\u4e00-\u9FA5:\/\.\?\^\+ =%&@#~]+$/.test(e))return e;t||(t=a.gettype("js"))}return window.URL.createObjectURL(e instanceof Blob?e:new Blob([e],{type:t}))}removeURL(e){return window.URL.revokeObjectURL(e)}download(e,t,a){let n;e instanceof Blob?(n=this.URL(e),e=e.name||"unknowfile"):n=this.URL(t,a);let s=document.createElement("a");s.href=n,s.download=e,s.click(),s.remove()}DB_STORE={};get DB(){return this.DB_STORE[this.T.DB_NAME]}get DB_idb(){return window.indexedDB||window.webkitindexedDB}DB_GETMAP(e){let{store:t,dbName:a,dbIndex:n}=e||{},s=this,r=s.T;return s.DB_MAP||(s.DB_MAP=Object.assign({},r.DB_MAP_LIST||{}),r.DB_NAME&&!s.DB_MAP[r.DB_NAME]&&(s.DB_MAP[r.DB_NAME]={},r.DB_STORE_MAP&&Object.entries(r.DB_STORE_MAP).forEach((e=>{let t=null==e[1]||"string"!=typeof e[1]?e[0]:e[1];s.DB_MAP[r.DB_NAME][t]=t==e[1]?{timestamp:!1}:e[1]||{}})))),a&&(!s.DB_MAP[a]&&(s.DB_MAP[a]={}),t&&(!s.DB_MAP[a][t]&&(s.DB_MAP[a][t]={}),n&&("string"==typeof n?s.DB_MAP[a][t][n]=!1:Object.assign(s.DB_MAP[a][t],n)))),s.DB_MAP}async DB_LOAD(e={}){let t=e.store,a=this,n=a.T,s=e.dbName||n.DB_NAME,r=a.DB_STORE[s];return!r||t&&!a.DB_checkTable(t,r)?(await a.DB_INSTALL(a.DB_GETMAP(Object.assign(e||{},{dbName:s}))),a.DB_STORE[s]):r}async DB_INSTALL(e){let t=this;await Promise.all(Object.entries(e).map((async e=>{let a,[n,s]=e,r=t.DB_STORE[n];if(r){if(!Object.entries(s).filter((e=>!t.DB_checkTable(e[0],r))).length)return"ok";a=r.version+1,r.close()}return await t.DB_OPEN(Object.assign({dbName:n,dbTable:s,dbVer:a}))})))}async DB_OPEN(e){if(!e)return;let{dbName:t,dbVer:a,dbTable:n}=e,s=this,r=(s.T,e.DB||s.DB_STORE[t]);if(a)r&&r.close();else if(r)return r;return new Promise(((r,i)=>{let o=s.DB_idb.open(t,a);o.addEventListener("error",(async e=>{i(e)})),o.addEventListener("upgradeneeded",(async t=>{let a=o.result;e.dbUpgrad?await e.dbUpgrad.apply(o,[a]):await s.DB_CreateTable(Object.assign(e,{DB:a}))})),o.addEventListener("versionchange",(e=>{})),o.addEventListener("success",(async i=>{let c=o.result;if(!a&&n){Object.entries(n).filter((e=>!s.DB_checkTable(e[0],c))).length&&(a=c.version+1,c=await s.DB_OPEN(Object.assign(e,{dbVer:a,DB:c})))}s.DB_STORE[t]=c,r(c)}))}))}async DB_CreateTable(e){let{dbTable:t,DB:a}=e||{};if(!t||!a)return;let n=this;await Promise.all(Object.entries(t).map((async e=>{let t,[s,r]=e;r.options&&(t=r.options,delete r.options);let i,o=Object.entries(r);n.DB_checkTable(s,a)||(i=await a.createObjectStore(s,t),n.DB_CreateIndex(o,i))})))}DB_CreateIndex(e,t){e.forEach((e=>{let[a,n]=e;!t.indexNames.contains(a)&&t.createIndex(a,a,n&&n.unique?n:{unique:!1})}))}DB_checkTable(e,t,a){return"string"==typeof e&&(e=[e]),e=e?e.filter((e=>t.objectStoreNames.contains(e))):[],a?e:e.length}async DB_ConvertData(e,t){e instanceof Promise&&(e=await e);let a=e.contents||e,n={};return"string"==typeof a&&a.length>t?(a=(new TextEncoder).encode(a),Object.assign(n,{contents:a,filesize:a.byteLength,type:"String"})):a instanceof Blob&&a.size>t?Object.assign(n,{contents:new Uint8Array(await a.arrayBuffer()),filetype:a.type,filesize:a.size,filename:a.name,type:"File"}):a.byteLength&&a.byteLength>t&&(a.__proto__.constructor!=Uint8Array&&(a=new Uint8Array(a.buffer||a)),Object.assign(n,{contents:a,filesize:a.byteLength,type:"Uint8Array"})),n.contents&&(e.type||n.type||(n.type="Uint8Array"),e.contents?(delete e.contents,Object.assign(e,n)):e=n),e.contents&&["version","password"].forEach((t=>!e[t]&&delete e[t])),e}async DB_SELECT(e,t){let a=this,n=a.T;"string"==typeof e&&(e={store:e}),e=Object.assign({dbName:n.DB_NAME},e);let{store:s,dbName:r}=e,i=a.DB_STORE[r]||a.DB;if(i&&a.DB_checkTable(s,i)||(i=await a.DB_LOAD(e)),t=t?"readonly":"readwrite",s){if(!a.DB_checkTable(s,i))return n.Err("store is null")}else s=i.objectStoreNames[0];let o=i.transaction([s],t);return o.onerror=e=>{throw e.preventDefault(),o.error},o.objectStore(s)}async DB_ItemGet(e){"string"==typeof e&&(e={name:e});let t=e.name,a=await this.DB_SELECT(e,!0);if(t)return new Promise((e=>{a.get(t).onsuccess=t=>e(t.target.result)}))}async DB_ItemPut(e){let{data:t,name:a}=e||{},n=await this.DB_SELECT(e);return new Promise((e=>{n.put(t,a).onsuccess=t=>e(t.target.result)}))}async DB_ItemRemove(e){"string"==typeof e&&(e={name:e});let t=e.name,a=await this.DB_SELECT(e);if(t)return new Promise(((e,n)=>{a.delete(t).onsuccess=a=>e(`delete:${t}`)}))}async DB_ItemAll(e){let t=this.T,a=await this.DB_SELECT(e,!0);return new Promise((n=>{let s={};a.openCursor().onsuccess=a=>{let r=a.target.result;if(r){if(!0===e.only&&t.part&&t.maxsize&&r.value.contents instanceof Uint8Array&&r.value.filesize>t.maxsize){let e=r.primaryKey.split(t.part),a=e[0],n=e[1]||0;if(s[a])s[a].contents.set(r.value.contents,n*t.maxsize);else{let e=new Uint8Array(r.value.filesize);e.set(r.value.contents,n*t.maxsize),delete r.value.contents,s[a]=Object.assign(r.value,{contents:e})}}else s[r.primaryKey]=r.value;r.continue()}else n(s)}}))}async DB_ItemKeys(e){"string"==typeof e&&(e={dbName:e});let t=await this.DB_SELECT(e,!0);return new Promise((e=>{t.getAllKeys().onsuccess=t=>{e(t.target.result)}}))}async DB_ItemCursor(e){"string"==typeof e&&(e={key:e});let t=e.key,a=this,n=a.T,s=await a.DB_SELECT(e,!0),r=s.indexNames.length;if(r&&!t)t=s.indexNames[0];else if(!r)return a.DB_ItemKeys(e);return new Promise((a=>{let r={};s.index(t).openKeyCursor().onsuccess=s=>{let i=s.target.result;i?((!0!==e.only||n.part&&!i.primaryKey.includes(n.part))&&(r[i.primaryKey]={},r[i.primaryKey][t]=i.key),i.continue()):a(r)}}))}async DB_clear(e,t){return"string"==typeof e&&(e=[e]),await Promise.all(e.map((async e=>{(await F.DB_SELECT({store:e,dbName:t})).clear()})))}DB_REMOVE(e){return this.DB_idb.deleteDatabase(e||this.T.DB_NAME)}async DB_delete(e,t){if(!e)return this.DB_REMOVE(t);let a=this,n=await a.DB_LOAD({dbName:t}),s=n.version+1,r=a.DB_checkTable(e,n,!0);return r.length?(n.close(),await a.DB_OPEN({dbName:n.name,dbVer:s,dbUpgrad:e=>{r.forEach((t=>e.deleteObjectStore(t)))}})):"nothing delete"}Libjs={};LibPack="libjs.png";LibStore="data-libjs";LibKey="libjs";Libzip="zip.min.js";async getLibjs(e){let t=this,a=t.T;if(t.Libjs[e])return t.Libjs[e];let n=await a.getContent("data-libjs",t.LibKey+"-"+e,a.version);if(!n){let n=t.Libzip,s=a.JSpath;t.Libjs[n]=s+n+"?"+t.random,e!=n&&await a.FectchItem({url:s+t.LibPack,store:"data-libjs",key:t.LibKey,unpack:!0,filename:e})}if(t.Libjs[e]instanceof File)if("rar.js"==e){n="var dataToPass=[],password;self.Module={locateFile:()=>'"+t.URL(await t.getLibjs("rar.mem"))+"',monitorRunDependencies:function(t){0==t&&setTimeout((function(){unrar(dataToPass,password||null)}),100)},onRuntimeInitialized:function(){}};\n                importScripts('"+t.URL(n)+'\');let unrar=function(t,e){let n=readRARContent(t.map((function(t){return{name:t.name,content:new Uint8Array(t.content)}})),e,(function(t,e,n){postMessage({t:4,current:n,total:e,name:t})})),o=function(t){if("file"===t.type)postMessage({t:2,file:t.fullFileName,size:t.fileSize,data:t.fileContent});else{if("dir"!==t.type)throw"Unknown type";Object.keys(t.ls).forEach((function(e){o(t.ls[e])}))}};return o(n),postMessage({t:1}),n};onmessage=function(t){dataToPass.push({name:"test.rar",content:t.data.data});if(!password&&t.data.password)password=t.data.password;};',t.Libjs[e]=new File([n],e,{type:t.gettype("js"),"x-content-type-options":"nosniff"})}else t.Libjs[e]=n;return t.Libjs[e]}constructor(e){Object.defineProperties(this,{T:{get:()=>e}})}}(this);on(e,t,a,n,s){(e||document).addEventListener(t,a,!1===n?{passive:!1}:n,s)}un(e,t,a,n,s){(e||document).removeEventListener(t,a,!1===n?{passive:!1}:n,s)}once(e,t,a,n,s){return this.on(e,t,a,{passive:!1,once:!0},s)}docload(e){return new Promise((t=>{if("loading"==document.readyState)return this.once(document,"DOMContentLoaded",(()=>{e&&e.call(this),t(!0)}));e&&e.call(this),t(!0)}))}};