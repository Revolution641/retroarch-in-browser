const Nenge=new class{DB_NAME="RetroArch_WEB";DB_STORE_MAP={"data-libjs":null,"data-rooms":null,"data-info":null,"/userdata":"userdata","/home/web_user/retroarch/userdata":"retroarch"};Encoding="GBK";version=2;maxsize=104857600;part="-part-";lang={};DATE=new Date;JSpath=document.currentScript&&document.currentScript.src.split("/").slice(0,-1).join("/")+"/";isMobile="ontouchend"in document;constructor(){}async getItem(e,t,n,a={}){if(!t)return await this.getAllData(e,a);let s=this,r=s.unitl,i=s.maxsize,o=s.part,c=await r.DB_ItemGet(Object.assign({store:e,name:t},a)),l=t.split(o)[0];if(c){if(n&&c.version&&c.version!=n)c=void 0;else if(c.contents&&c.filesize&&c.filesize>i){let n=new Uint8Array(c.filesize);await Promise.all(Array(Math.ceil(c.filesize/i)).fill(l).map((async(l,p)=>{let u=l;if(p>0&&(u+=o+p),u==t)n.set(c.contents,p*i);else{let t=await r.DB_ItemGet(Object.assign(a,{store:e,name:u}));t?n.set(t.contents,p*i):s.Err("lost file")}}))),c.contents=n}c&&c.contents&&("unpack"==c.type?c.contents=await r.unFile(c.contents,a):"File"==c.type?c.contents=new File([c.contents],c.filename||l,{type:c.filetype||r.gettype(c.filename||l)}):"String"==c.type&&(c.contents=(new TextDecoder).decode(c.contents)))}return c}async setItem(e,t,n,a){let s=this,r=s.unitl,i=s.maxsize,o=s.part;if((n=await r.DB_ConvertData(n,i)).contents&&n.contents.byteLength>i){let s=n.contents.byteLength,c={};return Object.entries(n).forEach((e=>{"contents"!=e[0]&&(c[e[0]]=e[1])})),await Promise.all(Array(Math.ceil(s/i)).fill(t).map((async(t,l)=>{let p=t,u=l*i;return l>0&&(p+=o+l),await r.DB_ItemPut({store:e,data:Object.assign({contents:new Uint8Array(n.contents.subarray(u,s-u>=i?u+i:s))},c),name:p,dbName:a})})))}return await r.DB_ItemPut({store:e,data:n,name:t,dbName:a})}async removeItem(e,t,n){let{clear:a,dbName:s}=n||{},r=this,i=r.unitl;if(a){let a=await i.DB_ItemGet(Object.assign({store:e,name:t},n));if(a&&a.filesize)return await Promise.all(Array(Math.ceil(a.filesize/r.maxsize)).fill(t.split(part)[0]).map((async(t,n)=>{let a=t;return n>0&&(a+=r.part+n),await i.DB_ItemRemove({store:e,name:a})+"\n"})))}return await i.DB_ItemRemove({store:e,name:t,dbName:s})}async getAllData(e,t,n){return await this.unitl.DB_ItemAll(Object.assign({store:e,only:t},n))}async getContent(e,t,n,a){let s=await this.getItem(e,t,n,a);return s&&s.contents||s}async getAllKeys(e,t){return await this.unitl.DB_ItemKeys({store:e,dbName:t})}async getAllCursor(e,t,n,a){return await this.unitl.DB_ItemCursor(Object.assign({store:e,key:t,only:n},a))}async clearDB(e,t){let n=this.unitl;if(e)return"string"==typeof e&&(e=[e]),await n.DB_clear(e,t)}async deleteDB(e,t){let n=this.unitl;return"string"==typeof e&&(e=[e]),await n.DB_delete(e,t)}async FetchItem(e){e&&"string"!=typeof e||(e={url:e||"/"});let t,n,a=this,s=a.unitl,r=e.key||s.getname(e.url)||"index.php",i=e.version,o={},c=(t,n)=>s.unFile(t,Object.assign(e,{password:n})),l=async t=>t&&t.contents?("unpack"==t.type&&(t.contents=await c(t.contents,t.password)),e.success&&e.success(t.contents,o),t.contents):(e.success&&e.success(t,o),t);if(e.store&&!e.unset&&(t=await a.getItem(e.store,r,i,e),t&&!e.checksize))return l(t);n=await s.FetchStart(e),o=s.FetchHeader(n,e);let p=o.password;if(404==n.status)return e.error&&e.error(n.statusText),l(t);if(t&&t.filesize&&o.byteLength>0){if(t.filesize==o.byteLength)return l(t);t.contents&&delete t.contents}let u=await s.FetchStream(n,o,e),d=o.type;u.byteLength&&(u=new Uint8Array(u.buffer||u),d="Uint8Array");let m=u.byteLength||o.byteLength||u.length||0;if(e.store&&e.unpack&&e.key!=s.LibKey&&m>a.maxsize&&(d="unpack",await a.setItem(e.store,r,{contents:u,timestamp:new Date,filesize:m,version:i,type:d,password:p}),delete e.store),e.unpack&&u instanceof Uint8Array&&(u=await c(u,p||e.password),u.byteLength||(d="datalist")),e.store&&e.key==s.LibKey){let t;u instanceof Uint8Array?(u=new File([u],s.getname(e.url),{type:o.type}),r=s.LibKey+"-"+s.getname(e.url),d="File"):(await Promise.all(Object.entries(u).map((async n=>{let[r,i]=n,o=r.split("/").pop(),c=s.gettype(o),l=new File([i],o,{type:c});return a.Libjs[o]=l,await a.setItem(e.store,s.LibKey+"-"+o,{contents:l,timestamp:a.DATE,filesize:i.byteLength,version:a.version,type:"File"}),e.filename==o&&(t=l),!0}))),t&&(u=t),delete e.store)}return e.store&&await a.setItem(e.store,r,{contents:u,timestamp:new Date,filesize:m,version:i,type:d}),e.success&&e.success(u,o),u}addJS(e,t,n){let a=!1,s=document.createElement(n?"link":"script"),r=t=>{/^(blob:)?https?:\/\//.test(e)||/(\.js$|\.css$)/.test(e)||(a=!0,e=this.unitl.URL(e,n?"css":"js")),n?(s.type=this.unitl.gettype("css"),s.href=e,s.rel="stylesheet"):(s.type=this.unitl.gettype("js"),s.src=e),s.onload=n=>{t&&t(n),a&&window.URL.revokeObjectURL(e),e=null},this.$(n?"head":"body").appendChild(s)};if(!t)return new Promise(((e,t)=>r(e)));r(t)}customElement(e){let t=this,n=class extends HTMLElement{constructor(){super(),t.runaction("TAG-"+this.tagName,[this,"init"])}connectedCallback(){t.runaction("TAG-"+this.tagName,[this,"connect"])}attributeChangedCallback(e,n,a){t.runaction("TAG-"+this.tagName,[this,"attribute",e,n,a])}disconnectedCallback(){t.runaction("TAG-"+this.tagName,[this,"disconnect"])}};window.customElements.define(e,n)}ajax(e){return new Promise(((t,n)=>{e=e||{};const a=new XMLHttpRequest(e.paramsDictionary);a.responseType=e.type||"arraybuffer",e.error||(e.error=n),e.mime&&a.overrideMimeType(e.mime);let s=["abort","error","load","loadend","loadstart","progress","readystatechange","timeout"];s.forEach((t=>e[t]&&this.on(a,t,(n=>e[t](n,a))))),e.readystatechange||this.on(a,"readystatechange",(n=>{switch(a.readyState){case 0:break;case 1:break;case 2:break;case 3:break;case 4:if(500==a.status)throw a.dispatchEvent(new ErrorEvent("error",{message:a.response})),a.response;e.success&&e.success(a.response,a.status,a,n),t(a.response);break}})),a.upload&&e.upload&&s.forEach((t=>e.upload[t]&&this.on(a.upload,t,(n=>e.upload[t](n,a)))));let r,i,o=e.url.split("?"),c=o[0];o[1]&&(r=new URLSearchParams(o.slice(1).join(""))),e.get=e.get||{},e.get.inajax=1,e.get._t=(new Date).getTime(),e.get&&(r?Object.entries(e.get).forEach((e=>r.append(e[0],e[1]))):r=new URLSearchParams(e.get)),r&&(c+="?"+r.toString()),e.post&&(e.post instanceof Element?i=new FormData(e.post):e.post instanceof FormData?i=e.post:(i=new FormData,Object.entries(e.post).forEach((e=>i.append(e[0],e[1])))),i.append("inajax",1)),a.open(e.post?"POST":"GET",c),a.send(i)}))}runaction(e,t){if(this.action[e])return t?t instanceof Array?this.action[e].apply(this,t):this.action[e].call(this,t):this.action[e]()}async appendscript(e){let t=/^(\/|https?:\/\/|static\/js\/|data\/)/.test(e)?e:this.JSpath+e,n=await this.FetchItem({url:t,store:"data-libjs",key:"script-"+e.split("/").pop(),version:this.version});return await this.addJS(n)}unFile(e,t,n){return this.unitl.unFile(e,Object.assign({process:t},n))}unitl=new class{async FetchStream(e,t,n){let a=t.byteLength||0,s=n.downtext&&n.downtext||"进度:",r=0;return new Response(new ReadableStream({async start(t){const i=e.body.getReader();let o=async()=>{const{done:e,value:c}=await i.read();if(e)t.close();else{let e;r+=Number(c.length),a&&(e=s+Math.floor(r/a*100)+"%"),n.process&&n.process(e,a,r),t.enqueue(c),o()}};o()}}))[n.type||"arrayBuffer"]()}FetchHeader(e,t){let n={};return e.headers.forEach(((e,t)=>n[t]=e)),(n["content-type"]||this.gettype(t.url.split("/").pop()||"html")).split(";").forEach(((e,t)=>{if(e=e.trim().toLowerCase(),0==t)n["content-type"]=e;else if(-1!=e.search(/=/)){let t=e.split("=");n[t[0].trim()]=t[1].trim()}})),Object.assign(n,{byteLength:Number(n["content-length"])||0,password:n.password||n["content-password"],type:n.type||n["content-type"].split("/")[0]})}async FetchStart(e){let t,{url:n,get:a,post:s,postdata:r,form:i}=e||{},o={};return a&&(n+=(/\?/.test(n)?"&":"?")+new URLSearchParams(a).toString()),["headers","context","referrer","referrerPolicy","mode","credentials","redirect","integrity","cache"].forEach((t=>{null!=e[t]&&(o[t]=e[t])})),i||s?(t="string"==typeof i?new FormData(this.T.$(i)):i instanceof HTMLElement?new FormData(i):i instanceof FormData?i:new FormData,s&&Object.entries(s).forEach((e=>t.append(e[0],e[1])))):r&&(t=r),t&&(o.method="POST",o.body=t),await fetch(n,o).catch((e=>{throw e}))}async unRAR(e,t){let{process:n,password:a,packsrc:s}=t,r=new Worker(this.URL(await this.getLibjs(s||"rar.js")));return new Promise((s=>{let i={};r.onmessage=e=>{let a=e.data;1===a.t?(s(i),e.target.terminate()):2===a.t?i[a.file]=a.data:4===a.t&&a.total>0&&a.total>=a.current&&n&&n(t.packtext+" "+(a.name||"")+" "+Math.floor(Number(a.current)/Number(a.total)*100)+"%",a.total,a.current)},r.postMessage(file?e:{data:e,password:a})}))}async un7z(e,t){return t.packsrc="7z.js",this.unRAR(e,t)}async unZip(e,t={}){let{process:n,password:a,packtext:s}=t,r=this,i=r.T;await r.ZipInitJS();let o=new zip.ZipReader(e instanceof Blob?new zip.BlobReader(e):new zip.Uint8ArrayReader(e)),c=await o.getEntries({filenameEncoding:i.Encoding});if(c.length>0){let e={};return await Promise.all(c.map((async t=>{if(t.directory)return;let i={onprogress:(e,a)=>n&&n(s+t.filename+":"+Math.ceil(100*e/a)+"%")};return t.encrypted?e[t.filename]=await r.ZipData(t,i,a):e[t.filename]=await t.getData(new zip.Uint8ArrayWriter,i),!0}))),o.close(),delete r.ZipPassword,e}return e}ZipWait(){if(null!=this.ZipPassword)return new Promise((e=>{let t=setInterval((()=>{""!=this.ZipPassword&&(clearInterval(t),e(!0))}),this.speed)}))}async ZipData(e,t,n){let a=this;try{return await e.getData(new zip.Uint8ArrayWriter,Object.assign(t,{password:a.ZipPassword||n}))}catch(s){if(["File contains encrypted entry","Invalid password"].includes(s.message))return await a.ZipWait(),this.ZipPassword&&a.ZipPassword!=n||(this.ZipPassword=""),a.ZipPassword||(a.ZipPassword=window.prompt("need a read password",a.ZipPassword||"")),await a.ZipData(e,t,a.ZipPassword||void 0);a.T.Err(s)}}async ZipCreate(e){return await this.ZipInitJS(),new zip.ZipWriter(new zip.Uint8ArrayWriter,{password:e})}async ZipInitJS(){let e=this,t=e.T;return window.zip||await t.addJS(await e.getLibjs(e.Libzip)),!0}async ZipAddFile(e,t,n,a,s){return n||(n=await this.ZipCreate(t)),e instanceof File?await n.add(e.name,new zip.BlobReader(e),a):await Promise.all(Array.from(e).map((async e=>await n.add(e.name,new zip.BlobReader(e),a)))),await n.close(s)}async unFile(e,t={}){if("string"==typeof t&&(t.unMode={unMode:t}),t.packtext=t.packtext||"解压:",t.unMode&&this[t.unMode])return await this[t.unMode](e,t);let n,a=null;if(e instanceof Blob){if(e.name){let t=e.name.split("?")[0].split(".").pop().toLowerCase();"zip"==t?a="unZip":"rar"==t?a="unRAR":"7z"==t&&(a="un7z")}else if(e.type){let t=e.type.split("/").pop();/zip/.test(t)?a="unZip":/rar/.test(t)?a="unRAR":/7z/.test(t)&&(a="un7z")}a||(e=new Uint8Array(await e.arrayBuffer()),n=this.checkBuffer(e))}else e instanceof Uint8Array?n=this.checkBuffer(e):(e.buffer||e instanceof Array)&&(e=new Uint8Array(e),n=this.checkBuffer(e));return n&&("zip"==n?a="unZip":"rar"==n?a="unRAR":"7z"==n&&(a="un7z")),a&&this[a]?await this[a](e,t):e}get random(){return Number(Math.random().toString().slice(2))}getname(e){return(e||"").split("/").pop().split("?")[0]}gettype(e){return e=this.getname(e).split(".").pop().toLowerCase(),this.mime_list||(this.mime_list={},Object.entries(this.mime_map).forEach((e=>e[1].forEach((t=>this.mime_list[t]=e[0]+(e[0].includes("/")?"":"/"+t)))))),this.mime_list[e]||"application/octet-stream"}mime_preg={"7z":/^377ABCAF271C/,rar:/^52617221/,zip:/^504B0304/,png:/^89504E470D0A1A0A/,gif:/^47494638/,jpg:/^FFD8FF/,webp:/^52494646/,pdf:/^255044462D312E/};mime_map={"text/javascript":["js"],"text/css":["css","style"],"text/html":["html","htm","php"],"text/plain":["txt"],"text/xml":["xml","vml","svg"],image:["jpg","jpeg","png","gif","webp"],application:["pdf"],"application/x-zip-compressed":["zip"],"application/x-rar-compressed":["rar"],"application/x-7z-compressed":["7z"]};checkBuffer(e,t){let n=Array.from(e.slice(0,8)).map((e=>e.toString(16).padStart(2,0).toLocaleUpperCase())).join("");if(n){let e=Object.entries(this.mime_preg).filter((e=>e[1].test(n)))[0];if(e)return e[0]}return t||"unkonw"}URL(e,t){let n=this;if(e instanceof Uint8Array)t||(t=n.gettype(n.checkBuffer(e)));else if("string"==typeof e){if(/^(blob|http)/.test(e)||/^\/?[\w\-_\u4e00-\u9FA5:\/\.\?\^\+ =%&@#~]+$/.test(e))return e;t||(t=n.gettype("js"))}return window.URL.createObjectURL(e instanceof Blob?e:new Blob([e],{type:t}))}removeURL(e){return window.URL.revokeObjectURL(e)}download(e,t,n){let a;e instanceof Blob?(a=this.URL(e),e=e.name||"unknowfile"):a=this.URL(t,n);let s=document.createElement("a");s.href=a,s.download=e,s.click(),s.remove()}DB_STORE={};get DB(){return this.DB_STORE[this.T.DB_NAME]}get DB_idb(){return window.indexedDB||window.webkitindexedDB}DB_GETMAP(e){let{store:t,dbName:n,dbIndex:a}=e||{},s=this,r=s.T;return s.DB_MAP||(s.DB_MAP=Object.assign({},r.DB_MAP_LIST||{}),r.DB_NAME&&!s.DB_MAP[r.DB_NAME]&&(s.DB_MAP[r.DB_NAME]={},r.DB_STORE_MAP&&Object.entries(r.DB_STORE_MAP).forEach((e=>{let t=null==e[1]||"string"!=typeof e[1]?e[0]:e[1];s.DB_MAP[r.DB_NAME][t]=t==e[1]?{timestamp:!1}:e[1]||{}})))),n&&(!s.DB_MAP[n]&&(s.DB_MAP[n]={}),t&&(!s.DB_MAP[n][t]&&(s.DB_MAP[n][t]={}),a&&("string"==typeof a?s.DB_MAP[n][t][a]=!1:Object.assign(s.DB_MAP[n][t],a)))),s.DB_MAP}async DB_LOAD(e={}){let t=e.store,n=this,a=n.T,s=e.dbName||a.DB_NAME,r=n.DB_STORE[s];return!r||t&&!n.DB_checkTable(t,r)?(await n.DB_INSTALL(n.DB_GETMAP(Object.assign(e||{},{dbName:s}))),n.DB_STORE[s]):r}async DB_INSTALL(e){let t=this;await Promise.all(Object.entries(e).map((async e=>{let n,[a,s]=e,r=t.DB_STORE[a];if(r){if(!Object.entries(s).filter((e=>!t.DB_checkTable(e[0],r))).length)return"ok";n=r.version+1,r.close()}return await t.DB_OPEN(Object.assign({dbName:a,dbTable:s,dbVer:n}))})))}async DB_OPEN(e){if(!e)return;let{dbName:t,dbVer:n,dbTable:a}=e,s=this,r=(s.T,e.DB||s.DB_STORE[t]);if(n)r&&r.close();else if(r)return r;return new Promise(((r,i)=>{let o=s.DB_idb.open(t,n);o.addEventListener("error",(async e=>{i(e)})),o.addEventListener("upgradeneeded",(async t=>{let n=o.result;e.dbUpgrad?await e.dbUpgrad.apply(o,[n]):await s.DB_CreateTable(Object.assign(e,{DB:n}))})),o.addEventListener("versionchange",(e=>{})),o.addEventListener("success",(async i=>{let c=o.result;if(!n&&a){Object.entries(a).filter((e=>!s.DB_checkTable(e[0],c))).length&&(n=c.version+1,c=await s.DB_OPEN(Object.assign(e,{dbVer:n,DB:c})))}s.DB_STORE[t]=c,r(c)}))}))}async DB_CreateTable(e){let{dbTable:t,DB:n}=e||{};if(!t||!n)return;let a=this;await Promise.all(Object.entries(t).map((async e=>{let t,[s,r]=e;r.options&&(t=r.options,delete r.options);let i,o=Object.entries(r);a.DB_checkTable(s,n)||(i=await n.createObjectStore(s,t),a.DB_CreateIndex(o,i))})))}DB_CreateIndex(e,t){e.forEach((e=>{let[n,a]=e;!t.indexNames.contains(n)&&t.createIndex(n,n,a&&a.unique?a:{unique:!1})}))}DB_checkTable(e,t,n){return"string"==typeof e&&(e=[e]),e=e?e.filter((e=>t.objectStoreNames.contains(e))):[],n?e:e.length}async DB_ConvertData(e,t){e instanceof Promise&&(e=await e);let n=e.contents||e,a={};return"string"==typeof n&&n.length>t?(n=(new TextEncoder).encode(n),Object.assign(a,{contents:n,filesize:n.byteLength,type:"String"})):n instanceof Blob&&n.size>t?Object.assign(a,{contents:new Uint8Array(await n.arrayBuffer()),filetype:n.type,filesize:n.size,filename:n.name,type:"File"}):n.byteLength&&n.byteLength>t&&(n.__proto__.constructor!=Uint8Array&&(n=new Uint8Array(n.buffer||n)),Object.assign(a,{contents:n,filesize:n.byteLength,type:"Uint8Array"})),a.contents&&(e.type||a.type||(a.type="Uint8Array"),e.contents?(delete e.contents,Object.assign(e,a)):e=a),e.contents&&["version","password"].forEach((t=>!e[t]&&delete e[t])),e}async DB_SELECT(e,t){let n=this,a=n.T;"string"==typeof e&&(e={store:e}),e=Object.assign({dbName:a.DB_NAME},e);let{store:s,dbName:r}=e,i=n.DB_STORE[r]||n.DB;if(i&&n.DB_checkTable(s,i)||(i=await n.DB_LOAD(e)),t=t?"readonly":"readwrite",s){if(!n.DB_checkTable(s,i))return a.Err("store is null")}else s=i.objectStoreNames[0];let o=i.transaction([s],t);return o.onerror=e=>{throw e.preventDefault(),o.error},o.objectStore(s)}async DB_ItemGet(e){"string"==typeof e&&(e={name:e});let t=e.name,n=await this.DB_SELECT(e,!0);if(t)return new Promise((e=>{n.get(t).onsuccess=t=>e(t.target.result)}))}async DB_ItemPut(e){let{data:t,name:n}=e||{},a=await this.DB_SELECT(e);return new Promise((e=>{a.put(t,n).onsuccess=t=>e(t.target.result)}))}async DB_ItemRemove(e){"string"==typeof e&&(e={name:e});let t=e.name,n=await this.DB_SELECT(e);if(t)return new Promise(((e,a)=>{n.delete(t).onsuccess=n=>e(`delete:${t}`)}))}async DB_ItemAll(e){let t=this.T,n=await this.DB_SELECT(e,!0);return new Promise((a=>{let s={};n.openCursor().onsuccess=n=>{let r=n.target.result;if(r){if(!0===e.only&&t.part&&t.maxsize&&r.value.contents instanceof Uint8Array&&r.value.filesize>t.maxsize){let e=r.primaryKey.split(t.part),n=e[0],a=e[1]||0;if(s[n])s[n].contents.set(r.value.contents,a*t.maxsize);else{let e=new Uint8Array(r.value.filesize);e.set(r.value.contents,a*t.maxsize),delete r.value.contents,s[n]=Object.assign(r.value,{contents:e})}}else s[r.primaryKey]=r.value;r.continue()}else a(s)}}))}async DB_ItemKeys(e){"string"==typeof e&&(e={dbName:e});let t=await this.DB_SELECT(e,!0);return new Promise((e=>{t.getAllKeys().onsuccess=t=>{e(t.target.result)}}))}async DB_ItemCursor(e){"string"==typeof e&&(e={key:e});let t=e.key,n=this,a=n.T,s=await n.DB_SELECT(e,!0),r=s.indexNames.length;if(r&&!t)t=s.indexNames[0];else if(!r)return n.DB_ItemKeys(e);return new Promise((n=>{let r={};s.index(t).openKeyCursor().onsuccess=s=>{let i=s.target.result;i?((!0!==e.only||a.part&&!i.primaryKey.includes(a.part))&&(r[i.primaryKey]={},r[i.primaryKey][t]=i.key),i.continue()):n(r)}}))}async DB_clear(e,t){return"string"==typeof e&&(e=[e]),await Promise.all(e.map((async e=>{(await F.DB_SELECT({store:e,dbName:t})).clear()})))}DB_REMOVE(e){return this.DB_idb.deleteDatabase(e||this.T.DB_NAME)}async DB_delete(e,t){if(!e)return this.DB_REMOVE(t);let n=this,a=await n.DB_LOAD({dbName:t}),s=a.version+1,r=n.DB_checkTable(e,a,!0);return r.length?(a.close(),await n.DB_OPEN({dbName:a.name,dbVer:s,dbUpgrad:e=>{r.forEach((t=>e.deleteObjectStore(t)))}})):"nothing delete"}Libjs={};LibPack="libjs.png";LibStore="data-libjs";LibKey="libjs";Libzip="zip.min.js";async getLibjs(e){let t=this,n=t.T;if(t.Libjs[e])return t.Libjs[e];let a=await n.getContent("data-libjs",t.LibKey+"-"+e,n.version);if(!a){let a=t.Libzip,s=n.JSpath;t.Libjs[a]=s+a+"?"+t.random,e!=a&&await n.FetchItem({url:s+t.LibPack,store:"data-libjs",key:t.LibKey,unpack:!0,filename:e})}if(t.Libjs[e]instanceof File)if("rar.js"==e){a="var dataToPass=[],password;self.Module={locateFile:()=>'"+t.URL(await t.getLibjs("rar.mem"))+"',monitorRunDependencies:function(t){0==t&&setTimeout((function(){unrar(dataToPass,password||null)}),100)},onRuntimeInitialized:function(){}};\n                importScripts('"+t.URL(a)+'\');let unrar=function(t,e){let n=readRARContent(t.map((function(t){return{name:t.name,content:new Uint8Array(t.content)}})),e,(function(t,e,n){postMessage({t:4,current:n,total:e,name:t})})),o=function(t){if("file"===t.type)postMessage({t:2,file:t.fullFileName,size:t.fileSize,data:t.fileContent});else{if("dir"!==t.type)throw"Unknown type";Object.keys(t.ls).forEach((function(e){o(t.ls[e])}))}};return o(n),postMessage({t:1}),n};onmessage=function(t){dataToPass.push({name:"test.rar",content:t.data.data});if(!password&&t.data.password)password=t.data.password;};',t.Libjs[e]=new File([a],e,{type:t.gettype("js"),"x-content-type-options":"nosniff"})}else t.Libjs[e]=a;return t.Libjs[e]}constructor(e){Object.defineProperties(this,{T:{get:()=>e}})}}(this);on(e,t,n,a,s){(e||document).addEventListener(t,n,!1===a?{passive:!1}:a,s)}un(e,t,n,a,s){(e||document).removeEventListener(t,n,!1===a?{passive:!1}:a,s)}once(e,t,n,a){return this.on(e,t,n,{passive:!1,once:!0},a)}docload(e){return new Promise((t=>{if("loading"==document.readyState)return this.once(document,"DOMContentLoaded",(()=>{e&&e.call(this),t(!0)}));e&&e.call(this),t(!0)}))}$=(e,t)=>e instanceof Function?this.docload(e):e instanceof Element?e:(t||document).querySelector(e);$$=(e,t)=>(t||document).querySelectorAll(e);$ce=e=>document.createElement(e);$attr={active:{get:function(){return this.classList.contains("active")},set:function(e){return this.classList[e?"add":"remove"]("active")}},Attr:{get:function(){return this.getAttr()},set:function(e){return this.setAttr(e)}},getAttr:function(e){return e?this.getAttribute(e):Object.fromEntries(Array.from(this.attributes||[]).map((e=>[e.name,e.value])))},setAttr:function(e,t){let n=this;return"string"==typeof e?null==t?n.removeAttribute(e):n.setAttribute(e,t):Object.entries(e).forEach((e=>n.setAttribute(e[0],e[1])))},$:function(e){return T.$(e,this)},$$:function(e){return T.$$(e,this)},on:function(e,t,n){return this.eventList?this.eventList.push({evt:e,func:t,opt:n}):this.eventList=[{evt:e,func:t,opt:n}],T.on(this,e,t,n)},un:function(e){this.eventList&&this.eventList.forEach((t=>{let{evt:n,func:a,opt:s}=t;e?e==n&&T.un(n,a,s):T.un(n,a,s)}))},once:function(e,t,n){return T.once(this,e,t,n)}};$elm(e,t){let n=this,a=n.$(e,t);return a?a.Attr||Object.entries(n.$attr).forEach((e=>{let[t,n]=e;Object.defineProperty(a,t,n.get?n:{value:n})})):n.Error(e),a}Err(e){throw new Error(e)}};